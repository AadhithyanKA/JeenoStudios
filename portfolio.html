<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Portfolio — Interactive Resume</title>
    <meta name="description" content="Interactive, game-like resume of Aadhithyan K A." />
    <link rel="icon" href="assets/favicon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="is-loading">
    <main>
      <section class="portfolio-hero">
        <div class="container">
          <h1 class="portfolio-title" aria-label="AADHITHYAN PORTFOLIO">
            <div class="title-backdrop" aria-hidden="true"></div>
            <svg class="title-outline" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2400 300" preserveAspectRatio="xMidYMid meet" text-rendering="geometricPrecision" shape-rendering="geometricPrecision">
              <defs>
                <linearGradient id="titleGlow" x1="0" x2="2400" y1="0" y2="0" gradientUnits="userSpaceOnUse">
                  <stop offset="0%" stop-color="#ff4fd8" />
                  <stop offset="50%" stop-color="#7a5cff" />
                  <stop offset="100%" stop-color="#30d5ff" />
                  <animateTransform attributeName="gradientTransform" type="translate" values="-2400 0; 2400 0; -2400 0" dur="10s" repeatCount="indefinite" />
                </linearGradient>
                <linearGradient id="titleFill" x1="0" x2="2400" y1="0" y2="0" gradientUnits="userSpaceOnUse">
                  <stop offset="0%" stop-color="#ff4fd8" />
                  <stop offset="50%" stop-color="#7a5cff" />
                  <stop offset="100%" stop-color="#30d5ff" />
                  <animateTransform attributeName="gradientTransform" type="translate" values="-2400 0; 2400 0; -2400 0" dur="10s" repeatCount="indefinite" />
                </linearGradient>
                <filter id="titleSoftGlow" x="-150" y="-150" width="2700" height="550" filterUnits="userSpaceOnUse">
                  <feDropShadow dx="0" dy="0" stdDeviation="7" flood-color="#000000" flood-opacity="0.8" />
                </filter>
              </defs>
              <text id="titleText" x="50%" y="50%" text-anchor="middle" dominant-baseline="middle" filter="url(#titleSoftGlow)" fill="url(#titleFill)" stroke="url(#titleGlow)" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="1" vector-effect="non-scaling-stroke" font-family="system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif" font-size="160" style="paint-order: fill stroke;">AADHITHYAN PORTFOLIO</text>
            </svg>
            <div class="portfolio-subtitle fadebars" aria-hidden="false">
              <span class="fadebars__text">AR/VR, Game Designer and Developer</span>
              <span class="fadebars__bar" style="--i:0" aria-hidden="true"></span>
              <span class="fadebars__bar" style="--i:1" aria-hidden="true"></span>
              <span class="fadebars__bar" style="--i:2" aria-hidden="true"></span>
            </div>
          </h1>
          <div class="section-index" aria-label="Section navigation">
            <!-- Buttons populated dynamically -->
          </div>
        </div>
      </section>

      <section class="projects showreel">
        <div class="container">
          <div class="matrix-container">
            <div class="rain" aria-hidden="true"></div>
            <div class="matrix-text" data-text="Showreel">Showreel</div>
          </div>

          <div class="project-grid" aria-label="Showreel">
            <article class="project-card">
              <div class="project-thumb">
                <div class="video-overlay"></div>
                <div class="video-embed" role="region" aria-label="Aadhithyan Game Design Showreel">
                  <iframe
                    id="showreelFrame"
                    src="https://www.youtube.com/embed/xY2J9jvz-vk?autoplay=0&mute=1&rel=0&modestbranding=1&playsinline=1&loop=1&playlist=xY2J9jvz-vk&enablejsapi=1&controls=1&iv_load_policy=3&disablekb=1"
                    title="Aadhithyan Game Design Showreel"
                    allow="autoplay; encrypted-media; picture-in-picture"
                    allowfullscreen>
                  </iframe>
                </div>
              </div>
              <div class="project-body">
                <h3 class="project-title">Showreel</h3>
                <p class="project-desc">A quick montage of recent work, auto-playing.</p>
              </div>
            </article>
          </div>
          <!-- YouTube controls will be shown inside the player; no extra button below -->
        </div>
      </section>

      <section class="projects">
        <div class="container">
          
          <div class="matrix-container">
            <div class="rain" aria-hidden="true"></div>
            <div class="matrix-text" data-text="Software Project's">Software Project's</div>
          </div>

          <div class="project-grid" aria-label="Project list">
            <article class="project-card">
              <div class="project-thumb project-thumb--flowtrix">
                <img src="assets/store_capsule_header.png" alt="Flowtrix thumbnail" />
                <div class="thumb-overlay" aria-hidden="true"></div>
              </div>
              <div class="project-body">
                <h3 class="project-title">Flowtrix : System and Economy Designer</h3>
                <p class="project-desc">Lightweight node‑based economy designer for games.</p>
                <div class="project-actions">
                  <a class="btn primary" href="https://aadhithyan.itch.io/flowtrix-system-and-economy-designer" target="_blank" rel="noopener noreferrer">View on itch.io</a>
                </div>
              </div>
            </article>


            <article class="project-card">
              <div class="project-thumb">
                <svg class="thumb-svg" viewBox="0 0 800 180" preserveAspectRatio="xMidYMid meet" role="img" aria-label="PixelStack3D">
                  <defs>
                    <linearGradient id="psGradient2" x1="0" x2="800" y1="0" y2="0" gradientUnits="userSpaceOnUse">
                      <stop offset="0%" stop-color="#ff4fd8" />
                      <stop offset="50%" stop-color="#7a5cff" />
                      <stop offset="100%" stop-color="#30d5ff" />
                    </linearGradient>
                  </defs>
                  <text x="50%" y="55%" text-anchor="middle" dominant-baseline="middle" fill="url(#psGradient2)" font-weight="800" font-size="64" font-family="system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif" style="text-rendering: geometricPrecision;">PixelStack3D</text>
                </svg>
                <div class="thumb-overlay" aria-hidden="true"></div>
              </div>
              <div class="project-body">
                <h3 class="project-title">PixelStack3D</h3>
                <p class="project-desc">Create 3D models using pixels; stack layers to build depth.</p>
                <div class="project-actions">
                  <a class="btn primary" href="https://aadhithyan.itch.io/pixelstack" target="_blank" rel="noopener noreferrer">View on itch.io</a>
                </div>
              </div>
            </article>
            
            <article class="project-card">
              <div class="project-thumb">
                <svg class="thumb-svg" viewBox="0 0 800 180" preserveAspectRatio="xMidYMid meet" role="img" aria-label="Pixelate Camera">
                  <defs>
                    <linearGradient id="pcGradient" x1="0" x2="800" y1="0" y2="0" gradientUnits="userSpaceOnUse">
                      <stop offset="0%" stop-color="#ff4fd8" />
                      <stop offset="50%" stop-color="#7a5cff" />
                      <stop offset="100%" stop-color="#30d5ff" />
                    </linearGradient>
                  </defs>
                  <text x="50%" y="55%" text-anchor="middle" dominant-baseline="middle" fill="url(#pcGradient)" font-weight="800" font-size="56" font-family="system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif" style="text-rendering: geometricPrecision;">Pixelate Camera</text>
                </svg>
                <div class="thumb-overlay" aria-hidden="true"></div>
              </div>
              <div class="project-body">
                <h3 class="project-title">Pixelate Camera</h3>
                <p class="project-desc">Create pixelart video using webcam or upload video or image</p>
                <div class="project-actions">
                  <a class="btn primary" href="https://aadhithyan.itch.io/pixelate-camera" target="_blank" rel="noopener noreferrer">View on itch.io</a>
                </div>
              </div>
            </article>
            <article class="project-card">
              <div class="project-thumb">
                <svg class="thumb-svg" viewBox="0 0 800 180" preserveAspectRatio="xMidYMid meet" role="img" aria-label="CamPaint3D">
                  <defs>
                    <linearGradient id="camGradient" x1="0" x2="800" y1="0" y2="0" gradientUnits="userSpaceOnUse">
                      <stop offset="0%" stop-color="#ff4fd8" />
                      <stop offset="50%" stop-color="#7a5cff" />
                      <stop offset="100%" stop-color="#30d5ff" />
                    </linearGradient>
                  </defs>
                  <text x="50%" y="55%" text-anchor="middle" dominant-baseline="middle" fill="url(#camGradient)" font-weight="800" font-size="64" font-family="system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif" style="text-rendering: geometricPrecision;">CamPaint3D</text>
                </svg>
                <div class="thumb-overlay" aria-hidden="true"></div>
              </div>
              <div class="project-body">
                <h3 class="project-title">CamPaint3D</h3>
                <p class="project-desc">Coming soon.</p>
                <div class="project-actions">
                  <button class="btn primary" aria-disabled="true">Coming Soon</button>
                </div>
              </div>
            </article>
</div>
        </div>
      </section>

      <section class="projects arvr">
        <div class="container">
          <div class="matrix-container">
            <div class="rain" aria-hidden="true"></div>
            <div class="matrix-text" data-text="AR/VR projects">AR/VR projects</div>
          </div>

          <div class="project-grid" aria-label="AR/VR project list">
            <article class="project-card">
              <div class="project-thumb">
                <svg class="thumb-svg" viewBox="0 0 800 180" preserveAspectRatio="xMidYMid meet" role="img" aria-label="AR Experience">
                  <defs>
                    <linearGradient id="arvrGradient1" x1="0" x2="800" y1="0" y2="0" gradientUnits="userSpaceOnUse">
                      <stop offset="0%" stop-color="#ff4fd8" />
                      <stop offset="50%" stop-color="#7a5cff" />
                      <stop offset="100%" stop-color="#30d5ff" />
                    </linearGradient>
                  </defs>
                  <text x="50%" y="55%" text-anchor="middle" dominant-baseline="middle" fill="url(#arvrGradient1)" font-weight="800" font-size="54" font-family="system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif" style="text-rendering: geometricPrecision;">AR Experience</text>
                </svg>
                <div class="thumb-overlay" aria-hidden="true"></div>
              </div>
              <div class="project-body">
                <h3 class="project-title">AR Experience</h3>
                <p class="project-desc">Interactive augmented reality project. Details coming soon.</p>
                <div class="project-actions">
                  <button class="btn primary" aria-disabled="true">Coming Soon</button>
                </div>
              </div>
            </article>

            <article class="project-card">
              <div class="project-thumb">
                <svg class="thumb-svg" viewBox="0 0 800 180" preserveAspectRatio="xMidYMid meet" role="img" aria-label="VR Experience">
                  <defs>
                    <linearGradient id="arvrGradient2" x1="0" x2="800" y1="0" y2="0" gradientUnits="userSpaceOnUse">
                      <stop offset="0%" stop-color="#ff4fd8" />
                      <stop offset="50%" stop-color="#7a5cff" />
                      <stop offset="100%" stop-color="#30d5ff" />
                    </linearGradient>
                  </defs>
                  <text x="50%" y="55%" text-anchor="middle" dominant-baseline="middle" fill="url(#arvrGradient2)" font-weight="800" font-size="54" font-family="system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif" style="text-rendering: geometricPrecision;">VR Experience</text>
                </svg>
                <div class="thumb-overlay" aria-hidden="true"></div>
              </div>
              <div class="project-body">
                <h3 class="project-title">VR Experience</h3>
                <p class="project-desc">Immersive virtual reality project. Details coming soon.</p>
                <div class="project-actions">
                  <button class="btn primary" aria-disabled="true">Coming Soon</button>
                </div>
              </div>
            </article>
          </div>
        </div>
      </section>

      <section class="games">
        <div class="container">
          <div class="matrix-container">
            <div class="rain" aria-hidden="true"></div>
            <div class="matrix-text" data-text="Games">Games</div>
          </div>
          <div class="slider" id="games-slider" aria-label="Games slideshow">
            <div class="slider-track">
            <article class="project-card">
              <div class="project-thumb project-thumb--gradient">
                <div class="thumb-label">Game 1</div>
                <div class="thumb-overlay" aria-hidden="true"></div>
              </div>
              <div class="project-body">
                <h3 class="project-title">Game Placeholder 1</h3>
                <p class="project-desc">New game entry coming soon.</p>
                <div class="project-actions">
                  <button class="btn primary" aria-disabled="true">Coming Soon</button>
                </div>
              </div>
            </article>

            <article class="project-card">
              <div class="project-thumb project-thumb--gradient">
                <div class="thumb-label">Game 2</div>
                <div class="thumb-overlay" aria-hidden="true"></div>
              </div>
              <div class="project-body">
                <h3 class="project-title">Game Placeholder 2</h3>
                <p class="project-desc">New game entry coming soon.</p>
                <div class="project-actions">
                  <button class="btn primary" aria-disabled="true">Coming Soon</button>
                </div>
              </div>
            </article>

            <article class="project-card">
              <div class="project-thumb project-thumb--gradient">
                <div class="thumb-label">Game 3</div>
                <div class="thumb-overlay" aria-hidden="true"></div>
              </div>
              <div class="project-body">
                <h3 class="project-title">Game Placeholder 3</h3>
                <p class="project-desc">New game entry coming soon.</p>
                <div class="project-actions">
                  <button class="btn primary" aria-disabled="true">Coming Soon</button>
                </div>
              </div>
            </article>

            <article class="project-card">
              <div class="project-thumb project-thumb--gradient">
                <div class="thumb-label">Game 4</div>
                <div class="thumb-overlay" aria-hidden="true"></div>
              </div>
              <div class="project-body">
                <h3 class="project-title">Game Placeholder 4</h3>
                <p class="project-desc">New game entry coming soon.</p>
                <div class="project-actions">
                  <button class="btn primary" aria-disabled="true">Coming Soon</button>
                </div>
              </div>
            </article>

            <article class="project-card">
              <div class="project-thumb project-thumb--gradient">
                <div class="thumb-label">Game 5</div>
                <div class="thumb-overlay" aria-hidden="true"></div>
              </div>
              <div class="project-body">
                <h3 class="project-title">Game Placeholder 5</h3>
                <p class="project-desc">New game entry coming soon.</p>
                <div class="project-actions">
                  <button class="btn primary" aria-disabled="true">Coming Soon</button>
                </div>
              </div>
            </article>

            <article class="project-card">
              <div class="project-thumb project-thumb--gradient">
                <div class="thumb-label">Game 6</div>
                <div class="thumb-overlay" aria-hidden="true"></div>
              </div>
              <div class="project-body">
                <h3 class="project-title">Game Placeholder 6</h3>
                <p class="project-desc">New game entry coming soon.</p>
                <div class="project-actions">
                  <button class="btn primary" aria-disabled="true">Coming Soon</button>
                </div>
              </div>
            </article>

            <article class="project-card">
              <div class="project-thumb project-thumb--gradient">
                <div class="thumb-label">Game 7</div>
                <div class="thumb-overlay" aria-hidden="true"></div>
              </div>
              <div class="project-body">
                <h3 class="project-title">Game Placeholder 7</h3>
                <p class="project-desc">New game entry coming soon.</p>
                <div class="project-actions">
                  <button class="btn primary" aria-disabled="true">Coming Soon</button>
                </div>
              </div>
            </article>

            <article class="project-card">
              <div class="project-thumb project-thumb--gradient">
                <div class="thumb-label">Game 8</div>
                <div class="thumb-overlay" aria-hidden="true"></div>
              </div>
              <div class="project-body">
                <h3 class="project-title">Game Placeholder 8</h3>
                <p class="project-desc">New game entry coming soon.</p>
                <div class="project-actions">
                  <button class="btn primary" aria-disabled="true">Coming Soon</button>
                </div>
              </div>
            </article>

            <article class="project-card">
              <div class="project-thumb project-thumb--gradient">
                <div class="thumb-label">Game 9</div>
                <div class="thumb-overlay" aria-hidden="true"></div>
              </div>
              <div class="project-body">
                <h3 class="project-title">Game Placeholder 9</h3>
                <p class="project-desc">New game entry coming soon.</p>
                <div class="project-actions">
                  <button class="btn primary" aria-disabled="true">Coming Soon</button>
                </div>
              </div>
            </article>

            <article class="project-card">
              <div class="project-thumb project-thumb--gradient">
                <div class="thumb-label">Game 10</div>
                <div class="thumb-overlay" aria-hidden="true"></div>
              </div>
              <div class="project-body">
                <h3 class="project-title">Game Placeholder 10</h3>
                <p class="project-desc">New game entry coming soon.</p>
                <div class="project-actions">
                  <button class="btn primary" aria-disabled="true">Coming Soon</button>
                </div>
              </div>
            </article>
          </div><div class="slider-controls"><button class="slider-btn prev" aria-label="Previous slide">‹</button><button class="slider-btn next" aria-label="Next slide">›</button></div><div class="slider-dots" aria-label="Slide navigation"></div><div class="slider-edge prev-zone" aria-label="Previous slide" role="button" tabindex="0"></div><div class="slider-edge next-zone" aria-label="Next slide" role="button" tabindex="0"></div>
        </div>
      </section>

      <section class="animations">
        <div class="container">
          <div class="matrix-container">
            <div class="rain" aria-hidden="true"></div>
            <div class="matrix-text" data-text="Animation Works">Animation Works</div>
          </div>
          <div class="project-grid" aria-label="Animation works list">
            <!-- Placeholder animation cards (match project styling) -->
            <article class="project-card">
              <div class="project-thumb project-thumb--gradient">
                <div class="thumb-label">Animation 1</div>
                <div class="thumb-overlay" aria-hidden="true"></div>
              </div>
              <div class="project-body">
                <h3 class="project-title">Animation Placeholder 1</h3>
                <p class="project-desc">New animation entry coming soon.</p>
                <div class="project-actions">
                  <button class="btn primary" aria-disabled="true">Coming Soon</button>
                </div>
              </div>
            </article>

            <article class="project-card">
              <div class="project-thumb project-thumb--gradient">
                <div class="thumb-label">Animation 2</div>
                <div class="thumb-overlay" aria-hidden="true"></div>
              </div>
              <div class="project-body">
                <h3 class="project-title">Animation Placeholder 2</h3>
                <p class="project-desc">New animation entry coming soon.</p>
                <div class="project-actions">
                  <button class="btn primary" aria-disabled="true">Coming Soon</button>
                </div>
              </div>
            </article>
          </div>

        </div>
      </section>

      <!-- Shortfilm Works: separate top-level section -->
      <section class="animations shortfilms">
        <div class="container">
          <div class="matrix-container">
            <div class="rain" aria-hidden="true"></div>
            <div class="matrix-text" data-text="Shortfilm Works">Shortfilm Works</div>
          </div>
          <div class="project-grid shortfilm-grid" aria-label="Shortfilm works list">
            <article class="project-card shortfilm-embed">
              <div class="project-body">
                <h3 class="project-title">Journey of Seed</h3>
                <p class="project-desc">Shortfilm — Worked as Director, Animator and Editor.</p>
              </div>
              <div class="project-thumb">
                <div class="video-embed" role="region" aria-label="Journey of Seed">
                  <iframe
                    src="https://www.youtube.com/embed/GdzziXeNdls?start=5&playsinline=1&rel=0&modestbranding=1&enablejsapi=1&controls=0&iv_load_policy=3&disablekb=1"
                    title="Journey of Seed"
                    allow="autoplay; encrypted-media; picture-in-picture"
                    allowfullscreen>
                  </iframe>
                </div>
                <div class="video-overlay">
                  <button class="btn primary video-unmute" type="button" aria-label="Play shortfilm">Tap to Play</button>
                </div>
              </div>
              <div class="project-actions" style="padding: 0 1rem 1rem;">
                <a class="btn" href="https://www.youtube.com/watch?v=GdzziXeNdls&t=5s" target="_blank" rel="noopener noreferrer">Open on YouTube</a>
              </div>
            </article>
            <article class="project-card shortfilm-embed">
              <div class="project-body">
                <h3 class="project-title">O Engira Kuppai Padam</h3>
                <p class="project-desc">Shortfilm — Worked as editor and effects.</p>
              </div>
              <div class="project-thumb">
                <div class="video-embed" role="region" aria-label="O Engira Kuppai Padam">
                  <iframe
                    id="shortfilmFrame"
                    src="https://www.youtube.com/embed/GmtGzfb169s?playsinline=1&rel=0&modestbranding=1&enablejsapi=1&controls=0&iv_load_policy=3&disablekb=1"
                    title="O Engira Kuppai Padam"
                    allow="autoplay; encrypted-media; picture-in-picture"
                    allowfullscreen>
                  </iframe>
                </div>
                <div class="video-overlay">
                  <button class="btn primary video-unmute" type="button" aria-label="Play shortfilm">Tap to Play</button>
                </div>
              </div>
              <div class="project-actions" style="padding: 0 1rem 1rem;">
                <a class="btn" href="https://www.youtube.com/watch?v=GmtGzfb169s" target="_blank" rel="noopener noreferrer">Open on YouTube</a>
              </div>
            </article>

            <article class="project-card shortfilm-embed">
              <div class="project-body">
                <h3 class="project-title">Vidhai</h3>
                <p class="project-desc">Shortfilm — Worked as editor and DI.</p>
              </div>
              <div class="project-thumb">
                <div class="video-embed" role="region" aria-label="Vidhai">
                  <iframe
                    id="shortfilmFrame2"
                    src="https://www.youtube.com/embed/ui1KvGtTP04?playsinline=1&rel=0&modestbranding=1&enablejsapi=1&controls=0&iv_load_policy=3&disablekb=1"
                    title="Vidhai shortfilm"
                    allow="autoplay; encrypted-media; picture-in-picture"
                    allowfullscreen>
                  </iframe>
                </div>
                <div class="video-overlay">
                  <button class="btn primary video-unmute" type="button" aria-label="Play shortfilm">Tap to Play</button>
                </div>
              </div>
              <div class="project-actions" style="padding: 0 1rem 1rem;">
                <a class="btn" href="https://www.youtube.com/watch?v=ui1KvGtTP04" target="_blank" rel="noopener noreferrer">Open on YouTube</a>
              </div>
            </article>

            <article class="project-card shortfilm-embed">
              <div class="project-body">
                <h3 class="project-title">Akramam</h3>
                <p class="project-desc">Shortfilm — Worked as editor.</p>
              </div>
              <div class="project-thumb">
                <div class="video-embed" role="region" aria-label="Akramam">
                  <iframe
                    src="https://www.youtube.com/embed/bjxHs0vb-1c?playsinline=1&rel=0&modestbranding=1&enablejsapi=1&controls=0&iv_load_policy=3&disablekb=1"
                    title="Akramam shortfilm"
                    allow="autoplay; encrypted-media; picture-in-picture"
                    allowfullscreen>
                  </iframe>
                </div>
                <div class="video-overlay">
                  <button class="btn primary video-unmute" type="button" aria-label="Play shortfilm">Tap to Play</button>
                </div>
              </div>
              <div class="project-actions" style="padding: 0 1rem 1rem;">
                <a class="btn" href="https://www.youtube.com/watch?v=bjxHs0vb-1c" target="_blank" rel="noopener noreferrer">Open on YouTube</a>
              </div>
            </article>
          </div>
        </div>
      </section>
    </main>
  </body>
  <!-- Avatar guide overlay -->
  <div class="avatar-guide" aria-live="polite">
    <img class="avatar-img" src="assets/Aadhithyan.gif" alt="Guide avatar" />
    <div class="speech-bubble">Welcome! Use the menu or buttons to explore.</div>
  </div>
  <div class="section-nav-bar" role="navigation" aria-label="Section controls">
    <button class="btn primary section-prev-btn" type="button" aria-label="Previous section">◀ Previous</button>
    <button class="btn primary section-home-btn" type="button" aria-label="Go to Home">Home</button>
    <button class="btn primary section-next-btn" type="button" aria-label="Next section">Next ▶</button>
  </div>
  <footer class="site-footer" aria-label="Site footer">&copy; Aadhithyan 2025</footer>
  <!-- Loading overlay content -->
  <div class="loading-overlay" aria-hidden="true">
    <div class="loading-title">Loading…</div>
    <div class="loading-rotator" id="loading-rotator"></div>
    <div class="loading-bar"><div class="loading-progress"></div></div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
  <!-- Removed VANTA.BIRDS -->
  <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function(){
      // Loading overlay behavior: rotate messages and animate progress
      const overlay = document.querySelector('.loading-overlay');
      const rotator = document.getElementById('loading-rotator');
      const progressEl = overlay ? overlay.querySelector('.loading-progress') : null;
      const messages = [
        'summoning hamsters to power the server',
        'bribing electrons to move faster',
        'please wait while we do absolutely nothing',
        'converting coffee to code'
      ];
      let msgIdx = 0;
      let msgTimer = null;
      let messagesShown = 0;
      let progress = 0;
      let progressTimer = null;
      let loaded = false;
      let finished = false;

      function showMessage(text){
        if (!rotator) return;
        rotator.classList.remove('show');
        setTimeout(() => {
          rotator.textContent = `Loading… ${text}`;
          rotator.classList.add('show');
          messagesShown++;
          // If page loaded and all messages have been shown, finish after a short delay
          if (loaded && messagesShown >= messages.length && !finished) {
            finished = true;
            if (msgTimer) clearInterval(msgTimer);
            setTimeout(() => finishLoading(), 500);
          }
        }, 150);
      }
      function startMessageRotation(){
        if (!rotator) return;
        showMessage(messages[msgIdx]);
        msgTimer = setInterval(() => {
          msgIdx = (msgIdx + 1) % messages.length;
          showMessage(messages[msgIdx]);
        }, 900);
      }
      function startProgress(){
        if (!progressEl) return;
        progress = 0;
        document.body.style.setProperty('--loading-progress', '0%');
        progressTimer = setInterval(() => {
          // Ease towards ~85% while loading
          const target = 85;
          progress += Math.max(1, (target - progress) * 0.12);
          if (progress > target) progress = target;
          progressEl.style.width = `${progress}%`;
        }, 180);
      }

      startMessageRotation();
      startProgress();

      function finishLoading(){
        document.body.classList.remove('is-loading');
        if (overlay) overlay.classList.add('fade-out');
        if (msgTimer) clearInterval(msgTimer);
        if (progressTimer) clearInterval(progressTimer);
        // Signal that overlay finished; let other scripts trigger intro
        try {
          window.__overlayDone = true;
          document.dispatchEvent(new CustomEvent('jeeno:intro'));
        } catch(e) {}
        setTimeout(() => { overlay && overlay.remove(); }, 460);
      }

      // On full load, complete the bar and either finish immediately or wait for messages
      window.addEventListener('load', function(){
        loaded = true;
        if (progressEl) {
          progressEl.style.transition = 'width 260ms ease';
          progressEl.style.width = '100%';
        }
        // Finish quickly regardless of message cycle; brief pause for 100% to be seen
        setTimeout(() => finishLoading(), 250);
      });
      let vantaEffect = null;
      function initVanta(){
        try {
          let siteNet = document.getElementById('site-net-bg');
          if (!siteNet) {
            siteNet = document.createElement('div');
            siteNet.id = 'site-net-bg';
            siteNet.className = 'site-net-bg';
            siteNet.setAttribute('aria-hidden', 'true');
            document.body.insertBefore(siteNet, document.body.firstChild);
          }
          // Destroy previous instance to allow re-init with new sizing
          if (vantaEffect && vantaEffect.destroy) vantaEffect.destroy();
          const isMobile = window.matchMedia('(max-width: 640px)').matches;
          vantaEffect = VANTA.NET({
            el: siteNet,
            // Reduce interactivity on mobile to avoid gesture conflicts
            mouseControls: !isMobile,
            touchControls: !isMobile,
            gyroControls: false,
            // Ensure it fits the viewport
            minHeight: Math.max(200, window.innerHeight),
            minWidth: Math.max(200, window.innerWidth),
            // Scale and density tuned for mobile
            scale: 1.0,
            scaleMobile: isMobile ? 0.85 : 1.0,
            backgroundAlpha: 0.0,
            color: 0x7a5cff,
            points: isMobile ? 9.0 : 14.0,
            maxDistance: isMobile ? 18.0 : 24.0,
            spacing: isMobile ? 22.0 : 18.0,
          });
        } catch (e) { console.error('VANTA init error', e); }
      }
      initVanta();
      window.addEventListener('resize', function(){
        // Debounce resize re-init to avoid thrashing
        clearTimeout(window.__vantaResizeTimer);
        window.__vantaResizeTimer = setTimeout(initVanta, 250);
      });
      window.addEventListener('orientationchange', function(){
        clearTimeout(window.__vantaResizeTimer);
        window.__vantaResizeTimer = setTimeout(initVanta, 250);
      });
    });
  </script>
  <script>
    // Initialize Games slideshow controls
    document.addEventListener('DOMContentLoaded', function(){
      const slider = document.getElementById('games-slider');
      if (!slider) return;
      const track = slider.querySelector('.slider-track');
      const prev = slider.querySelector('.slider-btn.prev');
      const next = slider.querySelector('.slider-btn.next');
      const dotsContainer = slider.querySelector('.slider-dots');
      const prevZone = slider.querySelector('.slider-edge.prev-zone');
      const nextZone = slider.querySelector('.slider-edge.next-zone');
      const slidesCount = track ? track.children.length : 0;

      // Autoplay configuration
      const intervalMs = 4000; // time between slides
      let autoplayTimer = null;

      function startAutoplay(){
        stopAutoplay();
        autoplayTimer = setInterval(() => {
          const idx = currentIndex();
          const nextIdx = (idx + 1) % Math.max(1, slidesCount);
          scrollToIndex(nextIdx);
        }, intervalMs);
      }

      function stopAutoplay(){
        if (autoplayTimer) {
          clearInterval(autoplayTimer);
          autoplayTimer = null;
        }
      }

      function itemWidth(){
        const first = track.firstElementChild;
        return first ? first.getBoundingClientRect().width : slider.clientWidth;
      }

      function currentIndex(){
        const w = itemWidth();
        const gap = parseFloat(getComputedStyle(track).gap) || 0;
        const span = w + gap;
        return span ? Math.round(track.scrollLeft / span) : 0;
      }

      function scrollToIndex(i){
        const max = Math.max(0, track.children.length - 1);
        const target = Math.max(0, Math.min(i, max));
        const w = itemWidth();
        const gap = parseFloat(getComputedStyle(track).gap) || 0;
        const span = w + gap;
        track.scrollTo({ left: target * span, behavior: 'smooth' });
      }

      prev && prev.addEventListener('click', function(){
        scrollToIndex(currentIndex() - 1);
        // pause briefly on manual interaction
        stopAutoplay();
      });
      next && next.addEventListener('click', function(){
        scrollToIndex(currentIndex() + 1);
        stopAutoplay();
      });

      // Edge zones click/keyboard
      function zoneKeyHandler(ev, dir){
        if (ev.key === 'Enter' || ev.key === ' ') {
          ev.preventDefault();
          dir === 'prev' ? scrollToIndex(currentIndex() - 1) : scrollToIndex(currentIndex() + 1);
          stopAutoplay();
        }
      }
      prevZone && prevZone.addEventListener('click', function(){
        scrollToIndex(currentIndex() - 1);
        stopAutoplay();
      });
      nextZone && nextZone.addEventListener('click', function(){
        scrollToIndex(currentIndex() + 1);
        stopAutoplay();
      });
      prevZone && prevZone.addEventListener('keydown', ev => zoneKeyHandler(ev, 'prev'));
      nextZone && nextZone.addEventListener('keydown', ev => zoneKeyHandler(ev, 'next'));

      // Keyboard arrows when slider is focused
      slider.addEventListener('keydown', function(ev){
        if (ev.key === 'ArrowLeft') {
          scrollToIndex(currentIndex() - 1);
          stopAutoplay();
        } else if (ev.key === 'ArrowRight') {
          scrollToIndex(currentIndex() + 1);
          stopAutoplay();
        }
      });

      window.addEventListener('resize', function(){
        // keep slide aligned on resize
        scrollToIndex(currentIndex());
      });

      // Build dots
      function buildDots(){
        if (!dotsContainer) return;
        dotsContainer.innerHTML = '';
        for (let i = 0; i < slidesCount; i++) {
          const btn = document.createElement('button');
          btn.className = 'slider-dot';
          btn.type = 'button';
          btn.setAttribute('aria-label', `Go to slide ${i+1}`);
          btn.addEventListener('click', () => {
            stopAutoplay();
            scrollToIndex(i);
            updateDots();
          });
          dotsContainer.appendChild(btn);
        }
      }

      function updateDots(){
        if (!dotsContainer) return;
        const dots = Array.from(dotsContainer.children);
        const idx = currentIndex();
        dots.forEach((d, i) => {
          d.classList.toggle('active', i === idx);
        });
      }

      track.addEventListener('scroll', () => {
        // throttle via rAF for performance
        if (track.__dotRaf) return;
        track.__dotRaf = requestAnimationFrame(() => {
          updateDots();
          track.__dotRaf = null;
        });
      });

      // Pause on hover/focus to give user control
      slider.addEventListener('mouseenter', stopAutoplay);
      slider.addEventListener('mouseleave', startAutoplay);
      slider.addEventListener('focusin', stopAutoplay);
      slider.addEventListener('focusout', startAutoplay);

      // Pause when not visible in viewport
      const io = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) startAutoplay(); else stopAutoplay();
        });
      }, { threshold: 0.3 });
      io.observe(slider);

      // kick off autoplay initially
      startAutoplay();
      buildDots();
      updateDots();
    });
  </script>
  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    // Showreel unmute/loop initialization
    document.addEventListener('DOMContentLoaded', function(){
      const overlay = document.querySelector('.projects.showreel .video-overlay');
      if (overlay) overlay.style.display = 'none';

      // Ensure iframe has origin param for some mobile environments
      try {
        const iframe = document.getElementById('showreelFrame');
        if (iframe && iframe.src) {
          const url = new URL(iframe.src);
          if (!url.searchParams.has('origin')) {
            url.searchParams.set('origin', location.origin);
            iframe.src = url.toString();
          }
        }
      } catch(e) {}
    });
  </script>
  <script>
    // Shortfilm inline players (play on overlay tap, hide suggestions) — supports multiple cards
    document.addEventListener('DOMContentLoaded', function(){
      function initShortfilmPlayers(){
        if (!window.YT || !YT.Player) return; // wait for API
        const cards = Array.from(document.querySelectorAll('.animations .shortfilm-embed'));
        cards.forEach((card, idx) => {
          const iframe = card.querySelector('iframe');
          const overlay = card.querySelector('.video-overlay');
          const btn = card.querySelector('.video-unmute');
          if (!iframe) return;
          const id = iframe.id || `shortfilmFrame_${idx + 1}`;
          if (!iframe.id) iframe.id = id;

          try {
            const player = new YT.Player(id, {
              events: {
                onReady: function(){
                  if (overlay) {
                    overlay.style.display = 'grid';
                    if (btn) { btn.textContent = 'Tap to Play'; btn.setAttribute('aria-label', 'Tap to Play'); }
                  }
                },
                onStateChange: function(ev){
                  try {
                    if (ev.data === YT.PlayerState.PAUSED) {
                      if (overlay) {
                        overlay.style.display = 'grid';
                        if (btn) { btn.textContent = 'Tap to Play'; btn.setAttribute('aria-label', 'Tap to Play'); }
                      }
                    } else if (ev.data === YT.PlayerState.PLAYING) {
                      if (overlay) overlay.style.display = 'none';
                    }
                  } catch(e) {}
                }
              }
            });

            if (btn) {
              btn.addEventListener('click', function(ev){
                ev.preventDefault();
                try { player.playVideo(); } catch(e) {}
              });
            }
          } catch(e) {
            console.warn('Shortfilm init failed for', id, e);
          }
        });
      }

      // If API already loaded, init now; otherwise hook into onYouTubeIframeAPIReady
      if (window.YT && YT.Player) initShortfilmPlayers();
      const prevReady = window.onYouTubeIframeAPIReady;
      window.onYouTubeIframeAPIReady = function(){
        if (typeof prevReady === 'function') { try { prevReady(); } catch(e) {} }
        initShortfilmPlayers();
      };
    });
  </script>
  <script>
    // Section-by-section navigation: Right Arrow/'D' and Left Arrow/'A', with Next/Previous/Home buttons
    document.addEventListener('DOMContentLoaded', function(){
      const sections = Array.from(document.querySelectorAll('main > section'));
      const nextBtn = document.querySelector('.section-next-btn');
      const prevBtn = document.querySelector('.section-prev-btn');
      const homeBtn = document.querySelector('.section-home-btn');
      const navBar = document.querySelector('.section-nav-bar');
      const indexContainer = document.querySelector('.section-index');
      const avatar = document.querySelector('.avatar-guide');
      const bubble = avatar ? avatar.querySelector('.speech-bubble') : null;
      const footer = document.querySelector('.site-footer');
      const AVATAR_LEAD_MS = 220; // avatar starts moving slightly before page transition

      // Intro animation: avatar drifts in an "S"-like path, then speaks
      function playIntroAnimation(){
        if (!avatar) return;
        if (bubble) bubble.classList.remove('bubble-show');
        const duration = 3600; // ms
        const start = performance.now();
        const ampX = Math.min(120, window.innerWidth * 0.24); // horizontal amplitude
        const ampY = Math.min(40, window.innerHeight * 0.08); // vertical drift
        const baseY = -Math.min(window.innerHeight * 0.7, 520); // start from top off-screen
        function easeInOut(t){ return t < 0.5 ? 2*t*t : -1 + (4 - 2*t) * t; }
        function frame(now){
          const t = Math.min(1, (now - start) / duration);
          const e = easeInOut(t);
          // S-like path using combined sin waves
          const x = Math.sin(e * Math.PI * 2) * ampX * 0.5 + Math.sin(e * Math.PI) * ampX * 0.3;
          // descend from top (baseY → 0) while gently drifting
          const y = baseY * (1 - e) + Math.sin(e * Math.PI * 2) * ampY;
          avatar.classList.add('avatar-no-transition');
          avatar.style.setProperty('--avatar-offset', `${Math.round(x)}px`);
          avatar.style.setProperty('--avatar-intro-y', `${Math.round(y)}px`);
          if (t < 1) {
            requestAnimationFrame(frame);
          } else {
            // Restore to resting offset and clear vertical drift
            avatar.classList.remove('avatar-no-transition');
            avatar.style.setProperty('--avatar-intro-y', '0px');
            avatar.style.setProperty('--avatar-offset', 'var(--avatar-rest-offset)');
            if (bubble) {
              bubble.textContent = "Welcome to Aadhithyan's Portfolio!! Use these buttons to navigate the site";
              bubble.classList.add('bubble-show');
              requestAnimationFrame(positionBubbleWithinViewport);
              clearTimeout(window.__bubbleTimer);
              window.__bubbleTimer = setTimeout(() => bubble.classList.remove('bubble-show'), 5200);
            }
          }
        }
        requestAnimationFrame(frame);
      }

      // Compute bottom safe padding so last content isn't hidden by fixed nav/footer
      function updateSafeBottomPadding(){
        const navH = navBar ? navBar.offsetHeight : 0;
        const footH = footer ? footer.offsetHeight : 0;
        const extra = 12; // breathing space
        const safe = Math.ceil(navH + footH + extra);
        document.documentElement.style.setProperty('--safe-bottom', `${safe}px`);
      }
      function setAvatarOffset(direction){
        if (!avatar) return;
        const dist = '110vw';
        const value = direction === 'forward' ? dist : direction === 'back' ? `calc(-1 * ${dist})` : '0vw';
        avatar.style.setProperty('--avatar-offset', value);
      }

      function travelAvatar(direction){
        if (!avatar) return;
        // Hide bubble during travel
        if (bubble) bubble.classList.remove('bubble-show');
        setAvatarOffset(direction);
      }

      function arriveAvatar(direction){
        if (!avatar) return;
        // Teleport to the opposite side without animating, then slide to center
        const dist = '110vw';
        const opposite = direction === 'forward' ? `calc(-1 * ${dist})` : dist;
        avatar.classList.add('avatar-no-transition');
        avatar.style.setProperty('--avatar-offset', opposite);
        // Force reflow to apply the no-transition state
        void avatar.offsetWidth;
        avatar.classList.remove('avatar-no-transition');
        // Slide to computed resting offset (away from Home button)
        avatar.style.setProperty('--avatar-offset', 'var(--avatar-rest-offset)');
      }

      function positionAvatarAboveFooter(){
        if (!avatar || !footer) return;
        const footerRect = footer.getBoundingClientRect();
        // Place avatar halfway above the footer bar
        const ratio = 0.5; // half of footer height
        const gapAbove = 6; // small breathing space
        const bottomOffsetPx = Math.max(6, (footerRect.height * ratio) + gapAbove);
        avatar.style.setProperty('--avatar-bottom', `${bottomOffsetPx}px`);
      }

      function computeAvatarRestOffset(){
        if (!avatar || !navBar) return;
        const rect = navBar.getBoundingClientRect();
        const centerX = window.innerWidth / 2;
        const leftSpace = rect.left;
        const rightSpace = window.innerWidth - rect.right;
        const safeMargin = 16; // keep some space from buttons
        // Choose side with more space
        let targetX;
        const avatarApproxWidth = Math.min(Math.max(window.innerWidth * 0.12, 96), 140);
        const isMobile = window.innerWidth <= 640;
        const preferRight = isMobile ? true : (rightSpace >= leftSpace);
        if (preferRight) {
          targetX = Math.min(
            window.innerWidth - safeMargin - avatarApproxWidth / 2,
            rect.right + safeMargin + avatarApproxWidth / 2
          );
        } else {
          targetX = Math.max(
            safeMargin + avatarApproxWidth / 2,
            rect.left - safeMargin - avatarApproxWidth / 2
          );
        }
        const offsetPx = Math.round(targetX - centerX);
        avatar.style.setProperty('--avatar-rest-offset', `${offsetPx}px`);
      }

      // Keep bubble within viewport on mobile by shifting horizontally when near edges
      function positionBubbleWithinViewport(){
        if (!avatar || !bubble) return;
        // Measure avatar center and bubble width relative to viewport
        const avatarRect = avatar.getBoundingClientRect();
        const bubbleRect = bubble.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        const safeMargin = 12; // px
        const avatarCenterX = avatarRect.left + avatarRect.width / 2;
        const halfBubble = bubbleRect.width / 2;
        const overflowLeft = Math.max(0, safeMargin - (avatarCenterX - halfBubble));
        const overflowRight = Math.max(0, (avatarCenterX + halfBubble) - (viewportWidth - safeMargin));
        const shift = overflowLeft > 0 ? (overflowLeft) : (overflowRight > 0 ? (-overflowRight) : 0);
        bubble.style.setProperty('--bubble-shift', `${shift}px`);
      }
      if (!sections.length || !nextBtn) return;

      let current = 0;
      // Prepare animation base classes
      sections.forEach(sec => sec.classList.add('section-animated'));
      let isAnimating = false;
      function setActive(index, instant){
        const next = Math.max(0, Math.min(index, sections.length - 1));
        if (instant) {
          current = next;
          sections.forEach((sec, i) => {
            const active = i === current;
            sec.classList.toggle('section-hidden', !active);
            sec.setAttribute('aria-hidden', (!active).toString());
          });
          updateNavButtons();
          window.scrollTo({ top: 0, behavior: 'instant' });
          return;
        }
        if (isAnimating || next === current) return;

        const direction = next > current ? 'forward' : 'back';
        const fromSec = sections[current];
        const toSec = sections[next];
        isAnimating = true;

        toSec.classList.remove('section-hidden');
        toSec.setAttribute('aria-hidden', 'false');
        toSec.classList.add(direction === 'forward' ? 'section-enter-forward' : 'section-enter-back');

        fromSec.classList.add(direction === 'forward' ? 'section-exit-forward' : 'section-exit-back');

        // Animate avatar movement; speak after arrival
        let targetLabel = (function(sec, i){
            if (sec.classList.contains('portfolio-hero')) return 'Home';
            const mt = sec.querySelector('.matrix-text');
            if (mt && (mt.getAttribute('data-text') || mt.textContent)) {
              return mt.getAttribute('data-text') || mt.textContent.trim();
            }
            const title = sec.querySelector('.portfolio-title');
            if (title && title.textContent) return title.textContent.trim();
            return `Section ${i + 1}`;
          })(toSec, next);
        travelAvatar(direction);

        // Start avatar travel first, then trigger section transition
        setTimeout(() => {
          // Force reflow
          void toSec.offsetWidth; void fromSec.offsetWidth;
          toSec.classList.add('section-enter-active');
          fromSec.classList.add('section-exit-active');
        }, AVATAR_LEAD_MS);

        let doneCount = 0;
        function cleanup(){
          doneCount++;
          if (doneCount < 2) return;
          fromSec.classList.remove('section-exit-forward','section-exit-back','section-exit-active');
          fromSec.classList.add('section-hidden');
          fromSec.setAttribute('aria-hidden', 'true');
          toSec.classList.remove('section-enter-forward','section-enter-back','section-enter-active');
          current = next;
          updateNavButtons();
          window.scrollTo({ top: 0, behavior: 'instant' });
          isAnimating = false;
          // Avatar arrives onto the new page and speaks
          arriveAvatar(direction);
          if (avatar && bubble) {
            bubble.textContent = (targetLabel.toLowerCase() === 'home')
              ? 'Welcome! Use the menu or buttons to explore.'
              : `This is my ${targetLabel}.`;
            bubble.classList.add('bubble-show');
            // Adjust bubble position after it becomes visible
            requestAnimationFrame(positionBubbleWithinViewport);
            clearTimeout(window.__bubbleTimer);
            window.__bubbleTimer = setTimeout(() => bubble.classList.remove('bubble-show'), 4200);
          }
        }
        const onFromEnd = (e) => { if (e.target !== fromSec) return; fromSec.removeEventListener('transitionend', onFromEnd); cleanup(); };
        const onToEnd = (e) => { if (e.target !== toSec) return; toSec.removeEventListener('transitionend', onToEnd); cleanup(); };
        fromSec.addEventListener('transitionend', onFromEnd);
        toSec.addEventListener('transitionend', onToEnd);
        // Fallback timeout slightly longer than CSS duration, plus lead
        setTimeout(() => {
          if (isAnimating) {
            fromSec.removeEventListener('transitionend', onFromEnd);
            toSec.removeEventListener('transitionend', onToEnd);
            cleanup(); cleanup();
          }
        }, 700 + AVATAR_LEAD_MS);
      }

      function updateNavButtons(){
        const atLast = current >= sections.length - 1;
        const atFirst = current <= 0;
        if (nextBtn) {
          nextBtn.style.visibility = atLast ? 'hidden' : 'visible';
          nextBtn.style.pointerEvents = atLast ? 'none' : '';
          nextBtn.setAttribute('aria-hidden', atLast ? 'true' : 'false');
          nextBtn.tabIndex = atLast ? -1 : 0;
        }
        if (prevBtn) {
          prevBtn.style.visibility = atFirst ? 'hidden' : 'visible';
          prevBtn.style.pointerEvents = atFirst ? 'none' : '';
          prevBtn.setAttribute('aria-hidden', atFirst ? 'true' : 'false');
          prevBtn.tabIndex = atFirst ? -1 : 0;
        }
      }

      function nextSection(){ setActive(current + 1, false); }
      function prevSection(){ setActive(current - 1, false); }

      // Initialize: show only the first section
      setActive(0, true);
      computeAvatarRestOffset();
      avatar && avatar.style.setProperty('--avatar-offset', 'var(--avatar-rest-offset)');
      // Anchor avatar just above footer on load
      positionAvatarAboveFooter();
      // Set safe bottom padding for content
      updateSafeBottomPadding();
      // Intro animation will start after loading overlay dismisses
      document.addEventListener('jeeno:intro', function(){
        try { playIntroAnimation(); } catch(e) {}
      });
      // Fallback: if overlay already finished before this script ran
      if (window.__overlayDone) {
        try { playIntroAnimation(); } catch(e) {}
      }

      // Auto-fade nav after inactivity; restore on interaction
      let navFadeTimer = null;
      function resetNavFade(){
        if (!navBar) return;
        navBar.classList.remove('nav-faded');
        if (navFadeTimer) clearTimeout(navFadeTimer);
        navFadeTimer = setTimeout(() => {
          navBar.classList.add('nav-faded');
        }, 5000);
      }
      resetNavFade();

      // Populate first-page section menu
      function deriveLabel(sec, i){
        if (sec.classList.contains('portfolio-hero')) return 'Home';
        const mt = sec.querySelector('.matrix-text');
        if (mt && (mt.getAttribute('data-text') || mt.textContent)) {
          return mt.getAttribute('data-text') || mt.textContent.trim();
        }
        const title = sec.querySelector('.portfolio-title');
        if (title && title.textContent) return title.textContent.trim();
        return `Section ${i + 1}`;
      }

      if (indexContainer) {
        indexContainer.innerHTML = '';
        sections.forEach((sec, i) => {
          const btn = document.createElement('button');
          btn.className = 'btn';
          btn.type = 'button';
          btn.textContent = deriveLabel(sec, i);
          btn.addEventListener('click', function(){
            const direction = i > current ? 'forward' : 'back';
            setActive(i, true);
            // After direct jump, keep avatar at resting offset away from nav
            avatar && avatar.style.setProperty('--avatar-offset', 'var(--avatar-rest-offset)');
            if (bubble) {
              const label = deriveLabel(sections[i], i);
              bubble.textContent = (label.toLowerCase() === 'home')
                ? 'Welcome! Use the menu or buttons to explore.'
                : `This is my ${label}.`;
              bubble.classList.add('bubble-show');
              requestAnimationFrame(positionBubbleWithinViewport);
              clearTimeout(window.__bubbleTimer);
              window.__bubbleTimer = setTimeout(() => bubble.classList.remove('bubble-show'), 4200);
            }
          });
          indexContainer.appendChild(btn);
        });
      }

      // Button navigation
      nextBtn.addEventListener('click', function(e){ e.preventDefault(); nextSection(); });
      if (prevBtn) { prevBtn.addEventListener('click', function(e){ e.preventDefault(); prevSection(); }); }
      if (homeBtn) { homeBtn.addEventListener('click', function(e){ e.preventDefault(); setActive(0, false); }); }
      // Interaction restores nav visibility
      [nextBtn, prevBtn, homeBtn].forEach(el => { if (el) el.addEventListener('click', resetNavFade); });

      // Keyboard navigation (Right Arrow/'D' for next; Left Arrow/'A' for previous)
      window.addEventListener('keydown', function(e){
        const key = (e.key || '').toLowerCase();
        if (e.code === 'ArrowRight' || key === 'arrowright' || e.code === 'KeyD' || key === 'd') {
          e.preventDefault();
          nextSection();
          resetNavFade();
        }
        if (e.code === 'ArrowLeft' || key === 'arrowleft' || e.code === 'KeyA' || key === 'a') {
          e.preventDefault();
          prevSection();
          resetNavFade();
        }
        if (e.code === 'Home' || key === 'home') {
          e.preventDefault();
          setActive(0, false);
          resetNavFade();
        }
      });
      // Pointer movement/touch also restores nav visibility
      window.addEventListener('mousemove', resetNavFade, { passive: true });
      window.addEventListener('touchstart', resetNavFade, { passive: true });
      // Keep avatar aligned with footer on viewport changes
      window.addEventListener('resize', function(){
        positionAvatarAboveFooter();
        computeAvatarRestOffset();
        avatar && avatar.style.setProperty('--avatar-offset', 'var(--avatar-rest-offset)');
        updateSafeBottomPadding();
      }, { passive: true });
      window.addEventListener('orientationchange', function(){
        positionAvatarAboveFooter();
        updateSafeBottomPadding();
      });
      window.addEventListener('resize', positionBubbleWithinViewport);
      window.addEventListener('orientationchange', positionBubbleWithinViewport);
    });
  </script>
  </html>